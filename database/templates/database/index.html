{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Violation Database" %} - {% endblock %}


{% block main %}


	<div class="row titlerow">
		<div class="col-md-12">
			<h1 class="pagetitle">{% trans "Violation Database" %}</h1>
		</div>
	</div>

<!-- TEST -->
 <div class="row filterrow">
 	<div class="col-md-12 filterwrapper">


		 <form method="get" action="/database">


		  {{ form.errors }}
			{{ form.non_field_errors }}

			{% trans "Search" %}
			{{ form.search_terms }}
			<table>
				<tr>
					<td> 
						{% trans "Type of Violation" %}
					</td>
					<td>
						{{ form.type_of_violation }}

					</td>
					<td> 
			  			{% trans "Location" %}
					</td>
					<td>
			  			{{form.location}}
					</td>
				</tr>
				<tr>
					<td> 
		  				{% trans "Start Date" %}
					</td>
					<td>
					  {{form.startDate}}
					</td>
					<td> 
		  				{% trans "End Date" %}
					</td>
					<td>
			  			{{form.endDate}}
					</td>
				</tr>
			</table>

		  	{% trans "Page" %}
			  {{form.page}}



		  <input type="submit" value="{% trans 'Filter' %}" />
		  </form>
	</div>
</div>


	<div class="row database-table">
		<div class="profile">

			<table id="database" class="table table-striped " cellspacing="0" width="100%">
			<thead>
				<tr>
					<th>{% trans "Name" %}</th>
					<th>{% trans "Description" %}</th>
					<th>{% trans "Recording Date" %}</th>
					<th>{% trans "Location" %}</th>
					<th>{% trans "Type of Violation" %}</th>
					<th>{% trans "Video" %}</th>
				</tr>
				
			<thead>

			<tbody>
				{% for entry in entries %}


					<tr>

					<td>
						<a href="/database/{{entry.id}}" >{{entry.name}}</a>
					</td>
            		<td>
            			{{entry.description}}
            		</td>
            		<td>
            			{{entry.recording_date}}
            		</td>
            		<td>
            			<b>{% for loc in entry.location.all %}
            				{{ loc.name }}
            			{% endfor %}</b>
            		</td>

            		<td>
            			{% for ctype in entry.type_of_violation.all %}
            				{{ ctype.name }}
            			{% endfor %}
			</td>
            		<td>
            		</td>
					
					</tr>
				{% endfor %}
			<tbody>
			</table>

		</div>
	</div>

{% endblock %}


{% block javascripts %}


<style type="text/css">
	input{
		background-color: white;
		color: black;
	}
</style>
<link href="/static/timetracker/datepicker/css/datepicker3.css" rel="stylesheet" media="screen">
<script src="/static/timetracker/datepicker/js/bootstrap-datepicker.js"></script>


<script type="text/javascript">
(function($){
	  $(document).ready(function(){
		$('.datepicker').datepicker({
	          format: 'dd M yyyy',
	          autoclose : true,
	          todayBtn: true,
	          closeBtn: true,
	          weekStart: 1,
	      });

	});

}(jQuery));
</script>

{% endblock %}